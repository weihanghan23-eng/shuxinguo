/* css/pages/page2.css - 药品集采解读页面样式 */

/* 关键修复：删除违规规则，让main.css控制宏观布局 */
/* 以下违规规则已被删除：
#page2-container {
    height: 100vh;
    width: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
}
*/

/* 容器样式 - 遵循全局PPT翻页布局规则 */
#page2-container {
    /* 添加措施背景1 - 与1-6页保持一致 */
    background-image: url('../../image/（1-6）68a725b2d3e64.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    
    /* 覆盖 main.css 的全局限制 */
    max-width: none !important;
    padding: 0 !important;
    display: block !important;
}

/* 1. 定义沙箱容器的基础属性，替代原始的 html, body 设置 */
#page2-container .page2-wrapper {
    width: 100%;
    height: 100vh;
    overflow: hidden;
    position: relative; /* 关键：为内部绝对定位元素提供基准 */
    
    /* 将 :root 和 body 的样式迁移到这里 */
    --base-color: #5D6465;
    --accent-color: #D9534F;
    --bg-color: #FFFBF0;
    --text-color: #594545;
    --transition-speed: 0.8s;
    background-color: transparent;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    color: var(--text-color);
}

/* 2. 将原始CSS中所有规则，全部加上沙箱前缀 */
#page2-container .page2-wrapper main { width: 100%; height: 100%; position: relative; }

#page2-container .page2-wrapper .scene {
    width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center;
    padding: 5vw; box-sizing: border-box; position: absolute; top: 0; left: 0;
    opacity: 0; pointer-events: none; transition: opacity var(--transition-speed) ease-in-out;
}

#page2-container .page2-wrapper .scene.is-active { opacity: 1; pointer-events: auto; }

#page2-container .page2-wrapper .scene-content {
    display: flex; align-items: center; justify-content: center;
    width: 100%; /* 改为 100% */
    max-width: none; /* 移除最大宽度限制 */
    gap: 5%;
}

#page2-container .page2-wrapper .visual-area { flex: 1; height: 60vh; position: relative; }
#page2-container .page2-wrapper .text-area { flex: 1; }

#page2-container .page2-wrapper .text-area h2 {
    font-size: clamp(28px, 2.5vw, 36px); color: var(--base-color); margin-bottom: 1em;
    font-weight: 600; opacity: 0; transform: translateY(25px);
    transition: opacity 0.8s ease, transform 0.8s ease;
}

#page2-container .page2-wrapper .text-area p {
    font-size: clamp(20px, 1.6vw, 24px); line-height: 2; margin-bottom: 2em;
    opacity: 0; transform: translateY(25px);
    transition: opacity 0.8s ease, transform 0.8s ease;
}

#page2-container .page2-wrapper .scene.is-active .text-area h2 { opacity: 1; transform: translateY(0); transition-delay: 0.2s; }
#page2-container .page2-wrapper .scene.is-active .text-area p:nth-of-type(1) { opacity: 1; transform: translateY(0); transition-delay: 0.4s; }
#page2-container .page2-wrapper .scene.is-active .text-area p:nth-of-type(2) { opacity: 1; transform: translateY(0); transition-delay: 0.6s; }
#page2-container .page2-wrapper .text-area strong { color: var(--accent-color); font-weight: 600; }

#page2-container .page2-wrapper .drawable {
    position: absolute; stroke: var(--base-color); stroke-width: 5; stroke-linecap: round;
    stroke-linejoin: round; fill: none; stroke-dasharray: 1000; stroke-dashoffset: 1000; opacity: 0;
}
#page2-container .page2-wrapper .scene.is-active .drawable { animation: draw 2s ease-out forwards; opacity: 1; transition: opacity 0.5s ease; }
@keyframes draw { to { stroke-dashoffset: 0; } }

/* --- 场景 1 --- */
#page2-container .page2-wrapper #scene1 #worker { top: 5%; left: 50%; width: 120px; transform: translateX(-50%); }
#page2-container .page2-wrapper #scene1 #materials { top: 50%; left: 50%; width: 150px; transform: translate(-50%, -50%); animation-delay: 0.5s; }
#page2-container .page2-wrapper #scene1 #money { bottom: 5%; left: 50%; width: 120px; transform: translateX(-50%); animation-delay: 1s; }

#page2-container .page2-wrapper .icon-label {
    position: absolute; font-size: clamp(16px, 1.2vw, 20px); color: var(--text-color);
    opacity: 0; transform: translateY(10px); transition: opacity 0.5s, transform 0.5s;
    text-align: center; width: 150px; left: 50%;
}
#page2-container .page2-wrapper .scene.is-active .icon-label { opacity: 1; transform: translateY(0); }
#page2-container .page2-wrapper #label-worker { top: calc(5% + 125px); transform: translateX(-50%); transition-delay: 0.5s; }
#page2-container .page2-wrapper #label-materials { top: calc(50% + 55px); transform: translateX(-50%); transition-delay: 1.0s; }
#page2-container .page2-wrapper #label-money { top: calc(95% - 5px); transform: translateX(-50%) translateY(-100%); transition-delay: 1.5s; }

/* --- 场景 2 --- */
#page2-container .page2-wrapper #scene2 #materials { top: 50%; left: 25%; width: 180px; transform: translate(-50%, -50%); animation-delay: 0.2s; }
#page2-container .page2-wrapper #scene2 .money-container { position: absolute; top: 50%; right: 25%; width: 180px; transform: translate(50%, -50%); display: flex; flex-direction: column; align-items: center; gap: 15px; }
#page2-container .page2-wrapper #scene2 #money { position: relative; width: 100%; height: auto; animation-delay: 0.2s; }
#page2-container .page2-wrapper #price-tag { position: relative; width: 100%; text-align: center; font-size: clamp(22px, 2.2vw, 32px); opacity: 0; transform: translateY(10px); }
#page2-container .page2-wrapper .scene.is-active #price-tag { animation: popUp 0.5s ease 2s forwards; }
#page2-container .page2-wrapper #price-tag .original { color: #999; text-decoration: line-through; }
#page2-container .page2-wrapper #price-tag .final { font-weight: bold; color: var(--accent-color); }
#page2-container .page2-wrapper #stamp { position: absolute; top: 50%; left: 25%; width: 100px; transform: translate(-50%, -50%); opacity: 0; }
#page2-container .page2-wrapper .scene.is-active #stamp { animation: stampIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1.5s forwards; }
@keyframes stampIn { from { transform: translate(-50%, -50%) scale(2.5); opacity: 0; } to { transform: translate(-50%, -50%) scale(1); opacity: 1; } }

/* --- 场景 3 --- */
#page2-container .page2-wrapper #scene3 #worker { top: 45%; left: 50%; width: 200px; transform: translate(-50%, -50%); animation-delay: 0.2s; }
#page2-container .page2-wrapper .thought-bubble { position: absolute; background-color: white; border: 3px solid var(--base-color); padding: 15px 20px; border-radius: 25px; font-size: clamp(16px, 1.2vw, 20px); opacity: 0; transform: scale(1); transition: transform 0.5s ease, opacity 0.5s ease; }
#page2-container .page2-wrapper .scene.is-active .thought-bubble { opacity: 1; animation: popUp 0.6s ease 1.5s forwards; }
#page2-container .page2-wrapper .scene.is-active .thought-bubble.is-fading { transform: scale(0); opacity: 0; } /* 气泡消失动画 */
#page2-container .page2-wrapper #bubble1 { top: 20%; left: 15%; }
#page2-container .page2-wrapper #bubble2 { top: 30%; right: 10%; animation-delay: 1.9s; }

#page2-container .page2-wrapper #solution-path {
    position: absolute; top: 50%; left: 50%; width: 80px; height: 100px;
    transform: translate(-50%, -20%); stroke: var(--base-color);
}
#page2-container .page2-wrapper #solution-text {
    position: absolute; bottom: 15%; left: 50%; transform: translateX(-50%);
    font-size: clamp(40px, 4vw, 52px); font-weight: bold; color: var(--accent-color);
    opacity: 0;
}
#page2-container .page2-wrapper .scene.is-active #solution-text { animation: popUp 0.6s ease 3.3s forwards; }

#page2-container .page2-wrapper #thumbs-up-fountain {
    position: absolute; bottom: 15%; left: 50%;
    width: 1px; height: 1px;
}
#page2-container .page2-wrapper .thumb {
    position: absolute; user-select: none;
    font-size: 2rem;
}
@keyframes fountain-rise {
    0% { transform: translateY(0) scale(0.5); opacity: 1; }
    100% { transform: var(--transform-end) scale(1); opacity: 0; }
}
@keyframes popUp { 0% { opacity: 0; transform: scale(0.8); } 100% { opacity: 1; transform: scale(1); } }

/* --- 导航与滚动提示 --- */
#page2-container .page2-wrapper .pagination { 
    position: absolute; /* 不再是 fixed */
    top: 50%; 
    right: 25px; 
    transform: translateY(-50%); 
    display: flex; 
    flex-direction: column; 
    gap: 15px; 
    z-index: 100; 
}
#page2-container .page2-wrapper .pagination .dot { width: 12px; height: 12px; border-radius: 50%; background-color: rgba(93, 100, 101, 0.4); cursor: pointer; transition: background-color 0.3s ease, transform 0.3s ease; }
#page2-container .page2-wrapper .pagination .dot:hover { background-color: rgba(93, 100, 101, 0.7); }
#page2-container .page2-wrapper .pagination .dot.is-active { background-color: var(--base-color); transform: scale(1.2); }
#page2-container .page2-wrapper #scroll-hint { 
    position: absolute; /* 不再是 fixed */
    bottom: 30px; 
    left: 50%; 
    transform: translateX(-50%); 
    z-index: 100; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    gap: 8px; 
    color: var(--base-color); 
    opacity: 1; 
    transition: opacity 0.5s ease; 
}

#page2-container .page2-wrapper #scroll-hint.hidden { opacity: 0; pointer-events: none; }
#page2-container .page2-wrapper #scroll-hint span { font-size: 14px; }
#page2-container .page2-wrapper #scroll-hint .arrow { width: 10px; height: 10px; border-bottom: 2px solid var(--base-color); border-right: 2px solid var(--base-color); transform: rotate(45deg); animation: bounce 2s infinite; }
@keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0) rotate(45deg); } 40% { transform: translateY(-8px) rotate(45deg); } 60% { transform: translateY(-4px) rotate(45deg); } }